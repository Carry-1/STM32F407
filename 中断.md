# 一种中断源对应一个中断服务函数，这种对应关系在启动文件中实现，这就是为什么自己定义的中断服务函数要和启动文件中的中断服务函数名字一模一样。
**1.**
|     cortex M4(内核，由ARM公司制造)                    |
| ---------------------------------------------------- |
| **GPIO &emsp;&emsp;I2C USART.....   (片上外设,ST公司制造)**  
**中断类型：**   
系统异常（体现在内核水平）   
外部中断：体现在外设水平   
（注意：我们在刚开始学习单片机编程时一般不区分中断和异常，就统称为中断。）

**2.理解EXTI功能框图**

**3.中断编程的顺序:以按键中断控制RGB灯为例（库函数编程）：**    
~~（1）使能中断请求~~   
~~&emsp;&emsp; 如何使能？需要配置哪些寄存器? 需使能中断通道（配置嵌套向量中断控制器NVIC时）与使能中断线（初始化EXTI时）~~   
~~（2）配置中断优先级分组（只需配置一次即可，在配置嵌套向量中断控制器NVIC的函数中配置)注意：中断优先级分组不仅针对片上外设，还针对内核，不要理所当然地认为内核中断优先级就大于外设中断优先级，都要通过各自的中断优先级分组来判断，这里与（操作系统里面的内核中断优先级高于外设中断优先级不同？对么？） 记住：只要是芯片里面的可以编程的中断优先级，其都受中断优先级分组的限制~~  
~~&emsp;&emsp;如何配置？需要配置哪个寄存器？~~ 
~~SCB-->AIRCR寄存器~~    
  
&ensp;**(1)初始化需要连接到exti线的GPIO**    
**（2）初始化EXT**I  
**（3）配置NVIC寄存器，初始化NVIC_InitTypeDef;**   
**（4）编写中断服务函数**   
&emsp;&emsp;<1>中断服务函数名要怎么写？写错了怎么办？   
&emsp;&emsp;&emsp;&emsp;stm32f4xx_it.c文件里定义的中断服务函数的函数名不是乱写的，必须跟中断向量表里面已经初始化好了中断服务函数的函数名的一样，写错了就相当于没有在startup_stm32f40xx.s以外的文件中定义中断服务函数，就会自动执行启动文件里面已经定义好了的中断服务函数（弱定义的，无限循环）   
&emsp;&emsp;<2>中断服务函数要写在什么地方？   
&emsp;&emsp;&emsp;&emsp;为了方便管理，在使用固件库编程时在USER文件夹下有一个stm32f4xx_it.c (interrupt简写为it)文件，最好把所有的中断服务函数都写在这里（不是必须的），初始时会默认有几个中断服务函数在这个文件里面。   


# 参考文献：
1.《[野火]STM32 库开发实战指南   
—基于野火霸天虎开发板》   
2.《1-STM32F4xx中文参考手册》   
3.《STM32F3 and STM32F4 Series Cortex®-M4 programming manual》